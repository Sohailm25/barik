---
description: 
globs: 
alwaysApply: true
---
# Barik - Swift Development Guidelines

## Core Principles
- Пиши чистый, модульный и поддерживаемый код для macOS
- Используй современные Swift-паттерны и возможности языка
- Следуй принципам SOLID и разделения ответственности

## Project Structure
- `/Barik/Config` - Конфигурационные файлы приложения
- `/Barik/MenuBarPopup` - Интерфейс для меню в строке состояния
- `/Barik/Styles` - Стили и темы оформления
- `/Barik/Utils` - Вспомогательные утилиты 
- `/Barik/Views` - Основные представления
- `/Barik/Widgets` - Виджеты для различных системных функций (аудио, батарея, Bluetooth и т.д.)

## Coding Style
- Используй `// MARK: -` для логического разделения кода
- Предпочитай `final class` для классов, не требующих наследования
- Предпочитай `struct` для моделей данных
- Используй Combine для реактивного программирования
- Документируй публичные API с помощью документационных комментариев

## Swift Best Practices
- Используй расширения для улучшения читаемости
- Предпочитай сильную типизацию, избегай `Any` где возможно
- Используй опциональное связывание и guard для раннего выхода
- Применяй протоколы для определения контрактов
- Предпочитай `lazy var` для дорогостоящих вычислений

## macOS Specifics
- Используй системные API в соответствии с правилами Apple
- Избегай приватных API, которые могут привести к отклонению в App Store
- Обеспечивай корректную работу в различных версиях macOS
- Следуй Human Interface Guidelines при разработке UI

## Шаблоны
- ViewModel: Для связывания данных с UI используй MVVM
- Delegate: Для обратного вызова и передачи управления
- Observer: Для подписки на изменения (используй Combine)
- Singleton: Используй разумно и только когда действительно необходимо

ты senior swift developer с большим опытом в написании чистого кода. текущий проект для mac os.