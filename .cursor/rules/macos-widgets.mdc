---
description: 
globs: 
alwaysApply: false
---
# Barik MacOS Widgets

## Widget Architecture
- Организуй виджеты по функциональному назначению в папке `/Barik/Widgets`
- Каждый виджет должен следовать единой архитектуре:
  - **Manager**: Управление состоянием и взаимодействие с системой
  - **View**: SwiftUI представление для отображения данных
  - **Model**: Структуры данных для представления состояния

## System Integration
- Используй системные нотификации для получения обновлений о состоянии системы
- Применяй `DistributedNotificationCenter` для получения уведомлений от других приложений
- Взаимодействуй с системными API через отдельные сервисные классы

## MacOS Menu Bar
- Создавай компактные и эффективные виджеты для строки меню
- Используй стандартные элементы управления MacOS для консистентности
- Обеспечивай доступность и удобство использования для всех виджетов

## Performance
- Оптимизируй обновления виджетов для минимального использования ресурсов
- Используй таймеры с оптимальной частотой обновления
- Кэшируй данные, которые не меняются часто

## Supported Widgets
- **Battery**: Отображение состояния батареи
- **Bluetooth**: Управление Bluetooth соединениями
- **KeyboardLayout**: Индикатор текущей раскладки клавиатуры
- **Network**: Отображение состояния сети
- **NowPlaying**: Информация о текущем воспроизведении и управление медиа
- **OutputAudio**: Управление аудиовыходом
- **Spaces**: Управление рабочими пространствами
- **SystemBanner**: Системные уведомления
- **Time+Calendar**: Отображение времени и календаря
